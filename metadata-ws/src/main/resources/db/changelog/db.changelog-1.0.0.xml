<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:appdba="http://www.datical.net/xml/ns/appdba" xmlns:datical="http://www.datical.net/xml/ns/datical" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
	<changeSet author="metauser (generated)" id="1569329013185-1">
		<createSequence sequenceName="analysis_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-2">
		<createSequence sequenceName="file_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-3">
		<createSequence sequenceName="hibernate_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-4">
		<createSequence sequenceName="reference_sequence_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-5">
		<createSequence sequenceName="sample_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-6">
		<createSequence sequenceName="study_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-7">
		<createSequence sequenceName="taxonomy_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-8">
		<createSequence sequenceName="web_resource_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-9">
		<createTable tableName="analysis">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="analysis_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="accession" type="VARCHAR(255)"/>
			<column name="version" type="INTEGER"/>
			<column name="description" type="TEXT">
				<constraints nullable="false"/>
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="platform" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="technology" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="type" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="study_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-10">
		<createTable tableName="analysis_files">
			<column name="analysis_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="files_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-11">
		<createTable tableName="analysis_reference_sequences">
			<column name="analysis_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="reference_sequences_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-12">
		<createTable tableName="analysis_samples">
			<column name="analysis_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="samples_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-13">
		<createTable tableName="file">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="file_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="accession" type="VARCHAR(255)"/>
			<column name="version" type="INTEGER"/>
			<column name="hash" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="size" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="type" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-14">
		<createTable tableName="publication">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="publication_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="publication_id" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-15">
		<createTable tableName="reference_sequence">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="reference_sequence_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="accession" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="patch" type="VARCHAR(255)"/>
			<column name="type" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="taxonomy_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-16">
		<createTable tableName="sample">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="sample_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="accession" type="VARCHAR(255)"/>
			<column name="version" type="INTEGER"/>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-17">
		<createTable tableName="sample_taxonomies">
			<column name="sample_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="taxonomies_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-18">
		<createTable tableName="study">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="study_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="accession" type="VARCHAR(255)"/>
			<column name="version" type="INTEGER"/>
			<column name="browsable" type="BOOLEAN"/>
			<column name="center" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="deprecated" type="BOOLEAN"/>
			<column name="description" type="TEXT">
				<constraints nullable="false"/>
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="release_date" type="date">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-19">
		<createTable tableName="study_child_studies">
			<column name="study_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="child_studies_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-20">
		<createTable tableName="study_publications">
			<column name="study_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="publications_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-21">
		<createTable tableName="study_resources">
			<column name="study_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="resources_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-22">
		<createTable tableName="taxonomy">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="taxonomy_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="rank" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
			<column name="taxonomy_id" type="BIGINT">
				<constraints nullable="false"/>
			</column>
			<column name="class_id" type="BIGINT"/>
			<column name="genus_id" type="BIGINT"/>
			<column name="order_id" type="BIGINT"/>
			<column name="species_id" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-23">
		<createTable tableName="web_resource">
			<column name="id" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="web_resource_pkey"/>
			</column>
			<column name="last_modified_date" type="date"/>
			<column name="resource_url" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-24">
		<addUniqueConstraint columnNames="accession, version" constraintName="uk24g50bfn14ectbgvay0phxdgb" tableName="study"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-25">
		<addUniqueConstraint columnNames="child_studies_id" constraintName="uk_1xscjwn5jadwumfa0jg438xd5" tableName="study_child_studies"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-26">
		<addUniqueConstraint columnNames="publication_id" constraintName="uk_30hycpvxfio69t4xtjnsfgiph" tableName="publication"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-27">
		<addUniqueConstraint columnNames="resource_url" constraintName="uk_3olmc5udj9tyx0fxcsufi22kt" tableName="web_resource"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-28">
		<addUniqueConstraint columnNames="taxonomy_id" constraintName="uk_f2pb24hexek2a4bfbm65ns2g4" tableName="taxonomy"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-29">
		<addUniqueConstraint columnNames="accession, version" constraintName="uka2641414v6fq3qoa0bn9v8rdx" tableName="file"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-30">
		<addUniqueConstraint columnNames="name, patch" constraintName="ukd0cl6cb8lngpg4olo33uq0b3k" tableName="reference_sequence"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-31">
		<addUniqueConstraint columnNames="accession, version" constraintName="uks0ijp9m3xxloam4crn071303a" tableName="analysis"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-32">
		<addUniqueConstraint columnNames="accession, version" constraintName="ukuirpnaqe13x0qylh9yog19ym" tableName="sample"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-33">
		<addForeignKeyConstraint baseColumnNames="analysis_id" baseTableName="analysis_reference_sequences" constraintName="fk205u3hxifax2jyolxw343wkdh" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="analysis" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-34">
		<addForeignKeyConstraint baseColumnNames="study_id" baseTableName="study_resources" constraintName="fk2yot9uny94wpjmoebha5kdh63" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="study" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-35">
		<addForeignKeyConstraint baseColumnNames="study_id" baseTableName="study_publications" constraintName="fk4w7shv2dykrd0vj48uabj1itu" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="study" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-36">
		<addForeignKeyConstraint baseColumnNames="resources_id" baseTableName="study_resources" constraintName="fk50o5sk0119lntp73b8j5jt9by" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="web_resource" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-37">
		<addForeignKeyConstraint baseColumnNames="publications_id" baseTableName="study_publications" constraintName="fkc083bgd8x0vn9x56cjojw5hl8" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="publication" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-38">
		<addForeignKeyConstraint baseColumnNames="reference_sequences_id" baseTableName="analysis_reference_sequences" constraintName="fkdq7yx0mq2tmv6amqtrytlskt8" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="reference_sequence" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-39">
		<addForeignKeyConstraint baseColumnNames="child_studies_id" baseTableName="study_child_studies" constraintName="fke6hegdc5lyw5t4rx01kv3527r" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="study" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-40">
		<addForeignKeyConstraint baseColumnNames="analysis_id" baseTableName="analysis_samples" constraintName="fkf1ivwgtbnprmc747jwrh2uf8v" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="analysis" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-41">
		<addForeignKeyConstraint baseColumnNames="genus_id" baseTableName="taxonomy" constraintName="fkfsr3qva7qfo1hde937wmnf9t2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="taxonomy_id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-42">
		<addForeignKeyConstraint baseColumnNames="taxonomy_id" baseTableName="reference_sequence" constraintName="fkg8574ukrev13kuelni6aanjee" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-43">
		<addForeignKeyConstraint baseColumnNames="files_id" baseTableName="analysis_files" constraintName="fkg98mbnvtlgrw3snoud2c70x6a" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="file" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-44">
		<addForeignKeyConstraint baseColumnNames="class_id" baseTableName="taxonomy" constraintName="fkh3ydln0qp0b00ivdtq50t2rna" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="taxonomy_id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-45">
		<addForeignKeyConstraint baseColumnNames="species_id" baseTableName="taxonomy" constraintName="fkirn4laq5u0rt8akhljkak94fm" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="taxonomy_id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-46">
		<addForeignKeyConstraint baseColumnNames="samples_id" baseTableName="analysis_samples" constraintName="fkiuqiceb6v0uhh3qhpmfv4ma2b" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="sample" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-47">
		<addForeignKeyConstraint baseColumnNames="sample_id" baseTableName="sample_taxonomies" constraintName="fkm2t1l9yk59ml3yt4qmoviqqda" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="sample" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-48">
		<addForeignKeyConstraint baseColumnNames="order_id" baseTableName="taxonomy" constraintName="fkmd0urpfct62pdmev27e190g7v" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="taxonomy_id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-49">
		<addForeignKeyConstraint baseColumnNames="study_id" baseTableName="analysis" constraintName="fkonf7hcukl3xwb7ys49peax08s" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="study" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-50">
		<addForeignKeyConstraint baseColumnNames="taxonomies_id" baseTableName="sample_taxonomies" constraintName="fkpsni44vdpwk4xxppgppq7c4m3" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="taxonomy" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-51">
		<addForeignKeyConstraint baseColumnNames="analysis_id" baseTableName="analysis_files" constraintName="fkq67f06oxvmdj36hdu363cpg1e" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="analysis" validate="true"/>
	</changeSet>
	<changeSet author="metauser (generated)" id="1569329013185-52">
		<addForeignKeyConstraint baseColumnNames="study_id" baseTableName="study_child_studies" constraintName="fktfwfp9t1op8ku2pcjrw8c80nw" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="study" validate="true"/>
	</changeSet>

	<changeSet id="tag-1.0" author="metauser">
		<tagDatabase tag="1.0" />
	</changeSet>
</databaseChangeLog>
